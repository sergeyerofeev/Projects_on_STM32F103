## Тестирование шины CAN
#### Код простого проекта для работы шины CAN в режиме **Loopback combined with Silent**.
#### Описание
Режим работы без трансивера. Все данные передаются и принимаются внутри МК.  
  
Скорость шины настроена на 500 КБит/с, при частоте APB1 24МГц.  
   
Используем прерывания для буфера RX_FIFO_1 (CAN RX1 interrupt), оно будет вызываться когда поступивший кадр, пройдя через фильтры, будет помещён в один из трёх почтовых ящиков (Mailbox 0..2).  
Буфер RX_FIFO_0 мы не используем, так его прерывание перекрывает прерывание от USB.  
  
Прерывание CAN SCE interrupt вызывается при возникновении ошибок. В обработчике зажигаем светодиод на выводе PB12.  

Прерывание CAN TX interrupt вызывается когда кадр отправлен — не используем, так как оно перекрывает прерывание от USB.  
___

#### Фильтр  
Используем **32-Bit Filter - Identifier Mask** и стандартные (11 бит) идентификаторы.
 
Начальный идентификатор равен 0х0100, маска 0х07F8, поэтому в прерывании будем принимать принимать идентификаторы с 0x0100 по 0x0107.  

---
В STM32F103 контроллеры USB и CAN разделяют общий буфер выделенной памяти SRAM, поэтому одновременная работа их невозможна.  
